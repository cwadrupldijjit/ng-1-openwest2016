(function () {
    'use strict';
    angular
        .module('AppThree.profiles')
        .directive('me', MeDirective);
    function MeDirective() {
        return {
            restrict: 'E',
            templateUrl: '/ng-app/profiles/me/profiles-me.template.html',
            controller: Me,
            controllerAs: 'vm',
            scope: {},
            bindToController: true
        };
    }
    Me.$inject = ['$scope', 'ProfileService'];
    function Me($scope, ProfileService) {
        var vm = this;
        vm.profile;
        vm.newInterest = '';
        vm.interestsEdit = [];
        vm.cancelInterestEdit = cancelInterestEdit;
        vm.saveInterest = saveInterest;
        vm.deleteInterest = deleteInterest;
        vm.editInterest = editInterest;
        getMe();
        function getMe() {
            ProfileService
                .getMe()
                .then(function getMeSuccess(response) {
                vm.profile = response;
            }, function getMeError(err) {
                console.error('Error:', err);
            });
        }
        function cancelInterestEdit(index) {
            if (index === 'new') {
                vm.newInterest = '';
                vm.interestsEdit[index] = '';
            }
            else {
                vm.profile.interests[index] = vm.interestsEdit[index];
                vm.interestsEdit[index] = '';
            }
        }
        function saveInterest(index) {
            var interest;
            if (index === 'new') {
                interest = vm.newInterest;
            }
            else {
                interest = vm.profile.interests[index];
            }
            console.log('dir', interest);
            ProfileService
                .saveInterest(interest, vm.profile.id, index)
                .then(function saveInterestSuccess(response) {
                if (index === 'new') {
                    vm.profile.interests.push(response);
                    vm.newInterest = '';
                }
                else {
                    vm.profile.interests[index] = response;
                }
                console.log('response', response);
                console.log('index', index);
                vm.interestsEdit[index] = '';
            }, function saveInterestError(err) {
                console.warn(err);
            });
        }
        function deleteInterest(index) {
            try {
                if (index === undefined) {
                    throw ('You\'re trying to delete an interest that doesn\'t exist');
                }
                if (confirm('Are you sure you want to delete this interest?')) {
                    ProfileService
                        .deleteInterest(vm.profile.interests[index], vm.profile.id)
                        .then(function deleteInterestSuccess(response) {
                        vm.profile.interests.splice(index, 1);
                    }, function deleteInterestError(err) {
                        console.warn(err);
                    });
                }
            }
            catch (e) {
                alert(e);
            }
        }
        function editInterest(index) {
            try {
                if (index === undefined) {
                    throw ('You\'re trying to edit an interest that doesn\'t exist');
                }
                if (index === 'new')
                    vm.interestsEdit.new = 'true';
                else
                    vm.interestsEdit[index] = vm.profile.interests[index];
            }
            catch (e) {
                alert(e);
            }
        }
    }
})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9wcm9maWxlcy9tZS9wcm9maWxlcy1tZS5kaXJlY3RpdmUudHMiXSwibmFtZXMiOlsiTWVEaXJlY3RpdmUiLCJNZSIsIk1lLmdldE1lIiwiTWUuZ2V0TWUuZ2V0TWVTdWNjZXNzIiwiTWUuZ2V0TWUuZ2V0TWVFcnJvciIsIk1lLmNhbmNlbEludGVyZXN0RWRpdCIsIk1lLnNhdmVJbnRlcmVzdCIsIk1lLnNhdmVJbnRlcmVzdC5zYXZlSW50ZXJlc3RTdWNjZXNzIiwiTWUuc2F2ZUludGVyZXN0LnNhdmVJbnRlcmVzdEVycm9yIiwiTWUuZGVsZXRlSW50ZXJlc3QiLCJNZS5kZWxldGVJbnRlcmVzdC5kZWxldGVJbnRlcmVzdFN1Y2Nlc3MiLCJNZS5kZWxldGVJbnRlcmVzdC5kZWxldGVJbnRlcmVzdEVycm9yIiwiTWUuZWRpdEludGVyZXN0Il0sIm1hcHBpbmdzIjoiQUFFQSxDQUFDO0lBQ0EsWUFBWSxDQUFDO0lBRWIsT0FBTztTQUNMLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQztTQUMzQixTQUFTLENBQUMsSUFBSSxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBRS9CO1FBQ0NBLE1BQU1BLENBQUNBO1lBQ05BLFFBQVFBLEVBQUVBLEdBQUdBO1lBQ2JBLFdBQVdBLEVBQUVBLCtDQUErQ0E7WUFDNURBLFVBQVVBLEVBQUVBLEVBQUVBO1lBQ2RBLFlBQVlBLEVBQUVBLElBQUlBO1lBQ2xCQSxLQUFLQSxFQUFFQSxFQUFFQTtZQUNUQSxnQkFBZ0JBLEVBQUVBLElBQUlBO1NBQ3RCQSxDQUFDQTtJQUNIQSxDQUFDQTtJQUVELEVBQUUsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxRQUFRLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztJQUUxQyxZQUFZLE1BQU0sRUFBRSxjQUFjO1FBQ2pDQyxJQUFJQSxFQUFFQSxHQUFHQSxJQUFJQSxDQUFDQTtRQUVkQSxFQUFFQSxDQUFDQSxPQUFPQSxDQUFDQTtRQUNYQSxFQUFFQSxDQUFDQSxXQUFXQSxHQUFHQSxFQUFFQSxDQUFDQTtRQUNw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QUMxQlcsSUFBSUEsQ0FBQ0E7Z0JBQ0pBLEVBQUVBLENBQUNBLENBQUNBLEtBQUtBLEtBQUtBLFNBQVNBLENBQUNBLENBQUNBLENBQUNBO29CQUN6QkEsTUFBS0EsQ0FBQ0Esd0RBQXdEQSxDQUFDQSxDQUFDQTtnQkFDakVBLENBQUNBO2dCQUVEQSxFQUFFQSxDQUFDQSxDQUFDQSxLQUFLQSxLQUFLQSxLQUFLQSxDQUFDQTtvQkFDbkJBLEVBQUVBLENBQUNBLGFBQWFBLENBQUNBLEdBQUdBLEdBQUdBLE1BQU1BLENBQUNBO2dCQUMvQkEsSUFBSUE7b0JBQUNBLEVBQUVBLENBQUNBLGFBQWFBLENBQUNBLEtBQUtBLENBQUNBLEdBQUdBLEVBQUVBLENBQUNBLE9BQU9BLENBQUNBLFNBQVNBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBO1lBQzVEQSxDQUFFQTtZQUFBQSxLQUFLQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtnQkFDWkEsS0FBS0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDVkEsQ0FBQ0E7UUFDRkEsQ0FBQ0E7SUFDRlgsQ0FBQ0E7QUFDRixDQUFDLENBQUMsRUFBRSxDQUFDIiwiZmlsZSI6ImFwcC9wcm9maWxlcy9tZS9wcm9maWxlcy1tZS5kaXJlY3RpdmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuXHJcbihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblx0XHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZSgnQXBwVGhyZWUucHJvZmlsZXMnKVxyXG5cdFx0LmRpcmVjdGl2ZSgnbWUnLCBNZURpcmVjdGl2ZSk7XHJcblx0XHJcblx0ZnVuY3Rpb24gTWVEaXJlY3RpdmUoKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRyZXN0cmljdDogJ0UnLFxyXG5cdFx0XHR0ZW1wbGF0ZVVybDogJy9uZy1hcHAvcHJvZmlsZXMvbWUvcHJvZmlsZXMtbWUudGVtcGxhdGUuaHRtbCcsXHJcblx0XHRcdGNvbnRyb2xsZXI6IE1lLFxyXG5cdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXHJcblx0XHRcdHNjb3BlOiB7fSxcclxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxyXG5cdFx0fTtcclxuXHR9XHJcblx0XHJcblx0TWUuJGluamVjdCA9IFsnJHNjb3BlJywgJ1Byb2ZpbGVTZXJ2aWNlJ107XHJcblx0XHJcblx0ZnVuY3Rpb24gTWUoJHNjb3BlLCBQcm9maWxlU2VydmljZSkge1xyXG5cdFx0dmFyIHZtID0gdGhpcztcclxuXHRcdFxyXG5cdFx0dm0ucHJvZmlsZTtcclxuXHRcdHZtLm5ld0ludGVyZXN0ID0gJyc7XHJcblx0XHR2bS5pbnRlcmVzdHNFZGl0ID0gW107XHJcblx0XHRcclxuXHRcdHZtLmNhbmNlbEludGVyZXN0RWRpdCA9IGNhbmNlbEludGVyZXN0RWRpdDtcclxuXHRcdHZtLnNhdmVJbnRlcmVzdCA9IHNhdmVJbnRlcmVzdDtcclxuXHRcdHZtLmRlbGV0ZUludGVyZXN0ID0gZGVsZXRlSW50ZXJlc3Q7XHJcblx0XHR2bS5lZGl0SW50ZXJlc3QgPSBlZGl0SW50ZXJlc3Q7XHJcblx0XHRcclxuXHRcdGdldE1lKCk7XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIGdldE1lKCkge1xyXG5cdFx0XHRQcm9maWxlU2VydmljZVxyXG5cdFx0XHRcdC5nZXRNZSgpXHJcblx0XHRcdFx0XHQudGhlbihmdW5jdGlvbiBnZXRNZVN1Y2Nlc3MocmVzcG9uc2UpIHtcclxuXHRcdFx0XHRcdFx0dm0ucHJvZmlsZSA9IHJlc3BvbnNlO1xyXG5cdFx0XHRcdFx0fSwgZnVuY3Rpb24gZ2V0TWVFcnJvcihlcnIpIHtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3I6JywgZXJyKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRmdW5jdGlvbiBjYW5jZWxJbnRlcmVzdEVkaXQoaW5kZXgpIHtcclxuXHRcdFx0aWYgKGluZGV4ID09PSAnbmV3Jykge1xyXG5cdFx0XHRcdHZtLm5ld0ludGVyZXN0ID0gJyc7XHJcblx0XHRcdFx0dm0uaW50ZXJlc3RzRWRpdFtpbmRleF0gPSAnJztcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR2bS5wcm9maWxlLmludGVyZXN0c1tpbmRleF0gPSB2bS5pbnRlcmVzdHNFZGl0W2luZGV4XTtcclxuXHRcdFx0XHR2bS5pbnRlcmVzdHNFZGl0W2luZGV4XSA9ICcnO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGZ1bmN0aW9uIHNhdmVJbnRlcmVzdChpbmRleCkge1xyXG5cdFx0XHR2YXIgaW50ZXJlc3Q7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoaW5kZXggPT09ICduZXcnKSB7XHJcblx0XHRcdFx0aW50ZXJlc3QgPSB2bS5uZXdJbnRlcmVzdDtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRpbnRlcmVzdCA9IHZtLnByb2ZpbGUuaW50ZXJlc3RzW2luZGV4XTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Y29uc29sZS5sb2coJ2RpcicsIGludGVyZXN0KTtcclxuXHRcdFx0UHJvZmlsZVNlcnZpY2VcclxuXHRcdFx0XHQuc2F2ZUludGVyZXN0KGludGVyZXN0LCB2bS5wcm9maWxlLmlkLCBpbmRleClcclxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uIHNhdmVJbnRlcmVzdFN1Y2Nlc3MocmVzcG9uc2UpIHtcclxuXHRcdFx0XHRcdFx0aWYgKGluZGV4ID09PSAnbmV3Jykge1xyXG5cdFx0XHRcdFx0XHRcdHZtLnByb2ZpbGUuaW50ZXJlc3RzLnB1c2gocmVzcG9uc2UpO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdHZtLm5ld0ludGVyZXN0ID0gJyc7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0dm0ucHJvZmlsZS5pbnRlcmVzdHNbaW5kZXhdID0gcmVzcG9uc2U7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdyZXNwb25zZScsIHJlc3BvbnNlKTtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ2luZGV4JywgaW5kZXgpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0dm0uaW50ZXJlc3RzRWRpdFtpbmRleF0gPSAnJztcclxuXHRcdFx0XHRcdH0sIGZ1bmN0aW9uIHNhdmVJbnRlcmVzdEVycm9yKGVycikge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oZXJyKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRmdW5jdGlvbiBkZWxldGVJbnRlcmVzdChpbmRleCkge1xyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGlmIChpbmRleCA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0XHR0aHJvdygnWW91XFwncmUgdHJ5aW5nIHRvIGRlbGV0ZSBhbiBpbnRlcmVzdCB0aGF0IGRvZXNuXFwndCBleGlzdCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoY29uZmlybSgnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIGludGVyZXN0PycpKSB7XHJcblx0XHRcdFx0XHRQcm9maWxlU2VydmljZVxyXG5cdFx0XHRcdFx0XHQuZGVsZXRlSW50ZXJlc3Qodm0ucHJvZmlsZS5pbnRlcmVzdHNbaW5kZXhdLCB2bS5wcm9maWxlLmlkKVxyXG5cdFx0XHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uIGRlbGV0ZUludGVyZXN0U3VjY2VzcyhyZXNwb25zZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0dm0ucHJvZmlsZS5pbnRlcmVzdHMuc3BsaWNlKGluZGV4LCAxKTtcclxuXHRcdFx0XHRcdFx0XHR9LCBmdW5jdGlvbiBkZWxldGVJbnRlcmVzdEVycm9yKGVycikge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKGVycik7XHJcblx0XHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gY2F0Y2ggKGUpIHtcclxuXHRcdFx0XHRhbGVydChlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRmdW5jdGlvbiBlZGl0SW50ZXJlc3QoaW5kZXgpIHtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRpZiAoaW5kZXggPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdFx0dGhyb3coJ1lvdVxcJ3JlIHRyeWluZyB0byBlZGl0IGFuIGludGVyZXN0IHRoYXQgZG9lc25cXCd0IGV4aXN0Jyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChpbmRleCA9PT0gJ25ldycpIFxyXG5cdFx0XHRcdFx0dm0uaW50ZXJlc3RzRWRpdC5uZXcgPSAndHJ1ZSc7XHJcblx0XHRcdFx0ZWxzZSB2bS5pbnRlcmVzdHNFZGl0W2luZGV4XSA9IHZtLnByb2ZpbGUuaW50ZXJlc3RzW2luZGV4XTtcclxuXHRcdFx0fSBjYXRjaCAoZSkge1xyXG5cdFx0XHRcdGFsZXJ0KGUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
